(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,t,a){e.exports=a(352)},163:function(e,t,a){},351:function(e,t,a){},352:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(64),i=a.n(o),s=(a(163),a(63)),c=a(41),l=a(21),u=a.n(l),d=a(34),h=a(37),p=a(31),m=a(50),g=a(51),f=a(55),b=a(52),v=a(56),E=a(53),w=a.n(E),O=a(54),y=a(144),j=a(145),S=a.n(j),x=a(106),k=a(353),C=a(369),_=a(361),N=a(368),A=a(367),M=a(370),I=a(107),B=a(364),J=a(365),D=a(363),T=a(105),z=a(14),L=a(45),X=a(80),G=a.n(X);a(271),a(274);G.a.initializeApp({apiKey:"AIzaSyD70mOFNDK4VjoQOw9JBItSw0_aME3EeWw",authDomain:"notes-d5c0d.firebaseapp.com",databaseURL:"https://notes-d5c0d.firebaseio.com",projectId:"notes-d5c0d",storageBucket:"notes-d5c0d.appspot.com",messagingSenderId:"1001740796289",appId:"1:1001740796289:web:4c92c4b3621037cc"});var W=G.a,q=G.a.firestore(),K={document:{nodes:[{object:"block",type:"paragraph",nodes:[{object:"text",text:"A line of text in a paragraph."}]}]}},R=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={selected:"",notes:{},title:{},content:{},isLoading:!0,isShown:!1,user:null},a._handleAddNoteButton=Object(p.a)(u.a.mark(function e(){var t,n,r,o,i=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{email:null},n=t.email,r=S()(),o={id:r,title:L.a.deserialize(""),content:L.a.deserialize(""),createdAt:W.firestore.Timestamp.fromDate(new Date),user:n||a.state.user.email},e.prev=3,e.next=6,q.collection("notes").doc(r).set(Object(h.a)({},o,{title:JSON.stringify(o.title.toJSON()),content:JSON.stringify(o.content.toJSON())}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:a.setState({notes:Object(h.a)({},a.state.notes,Object(d.a)({},r,o)),selected:r,title:o.title,content:o.content,isShown:!1});case 12:case"end":return e.stop()}},e,null,[[3,8]])})),a._handleNoteSelect=function(e){a.setState({selected:e,title:a.state.notes[e].title,content:a.state.notes[e].content,isShown:!1})},a._autoSave=Object(y.debounce)(Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.collection("notes").doc(a.state.selected).update({title:JSON.stringify(a.state.title.toJSON()),content:JSON.stringify(a.state.content.toJSON())}).catch(function(e){return console.log("error updating doc: "+e)});case 2:case"end":return e.stop()}},e)})),500),a._handleTitleChange=function(e){var t=e.value,n=Object(h.a)({},a.state.notes,Object(d.a)({},a.state.selected,Object(h.a)({},a.state.notes[a.state.selected],{title:t})));a.setState({notes:n,title:t}),a._autoSave()},a._handleContentChange=function(e){var t=e.value,n=Object(h.a)({},a.state.notes,Object(d.a)({},a.state.selected,Object(h.a)({},a.state.notes[a.state.selected],{content:t})));a.setState({notes:n,content:t}),a._autoSave()},a._handleLogOut=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.auth().signOut();case 3:a.props.history.push("/signin"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])})),a._handleEditorKeyDown=function(e,t,a){if("Enter"!==e.key)return a();e.preventDefault()},a._handleNoteDelete=function(){var e=Object(p.a)(u.a.mark(function e(t){var n,r,o,i,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.noteId,e.prev=1,e.next=4,q.collection("notes").doc(n).delete();case 4:if(1!==Object.keys(a.state.notes).length){e.next=10;break}return a.setState({notes:{}}),e.next=8,a._handleAddNoteButton();case 8:e.next=18;break;case 10:r=Object(h.a)({},a.state.notes),o=Object.values(r).sort(function(e,t){return t.createdAt.seconds-e.createdAt.seconds}),i=0,o.forEach(function(e,t){e.id!==n||(i=t)}),o.splice(i,1),s=i-1>=0?i-1:0,delete r[n],a.setState({notes:r,selected:o[s].id,title:o[s].title,content:o[s].content});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),console.log(e.t0);case 23:case"end":return e.stop()}},e,null,[[1,20]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,this._ismounted=!0,W.auth().onAuthStateChanged(function(e){e&&t._ismounted?t.setState({user:e}):t.props.history.push("/signin")});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(p.a)(u.a.mark(function e(t,a){var n,r,o,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a.user||null==this.state.user){e.next=15;break}return n=this.state.user,e.next=4,q.collection("notes").where("user","==",n.email).orderBy("createdAt","desc").limit(20).get();case 4:if(r=e.sent,o={},0!==r.size){e.next=11;break}return e.next=9,this._handleAddNoteButton({email:n.email});case 9:e.next=14;break;case 11:r.forEach(function(e){var t=e.data();o[t.id]=Object(h.a)({},t,{title:z.n.fromJSON(JSON.parse(t.title)),content:z.n.fromJSON(JSON.parse(t.content))})}),i=Object.values(o)[0],this.setState({selected:i.id,title:i.title||K,content:i.content||K,notes:o});case 14:this.setState({isLoading:!1,username:n.displayName,email:n.email});case 15:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.notes,n=t.title,o=t.content,i=t.isLoading,s=t.user;return r.a.createElement(r.a.Fragment,null,s?r.a.createElement(x.a,{height:"100%"},r.a.createElement(C.a,{position:_.a.LEFT,isShown:this.state.isShown,width:this.props.isMobile?this.props.width-70:250,onCloseComplete:function(){return e.setState({isShown:!1})}},r.a.createElement(x.a,{height:"100%",background:"tint1",className:"sidebar"},r.a.createElement(N.a,null,r.a.createElement(x.a,null,r.a.createElement(N.a.Group,null,r.a.createElement(A.a,{position:_.a.BOTTOM_RIGHT,content:r.a.createElement(N.a,null,r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Item,{icon:"log-out",onSelect:this._handleLogOut},"\ub85c\uadf8\uc544\uc6c3")))},r.a.createElement(N.a.Item,null,r.a.createElement(x.a,{display:"flex",alignItems:"center"},r.a.createElement(M.a,{name:s.displayName,size:25,sizeLimitOneCharacter:25,marginRight:5}),r.a.createElement(I.a,{fontWeight:600},s.displayName)))))),r.a.createElement(x.a,{className:"note-list",flex:1,overflowX:"hidden",overflowY:"auto"},r.a.createElement(N.a.Group,null,Object.values(a).map(function(t){return r.a.createElement(N.a.Item,{key:t.id,onSelect:function(){return e._handleNoteSelect(t.id)}},r.a.createElement(I.a,{fontWeight:t.id===e.state.selected?700:500},L.a.serialize(t.title)||"\uc81c\ubaa9 \uc5c6\uc74c"))}))),r.a.createElement(x.a,null,r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Item,{onSelect:this._handleAddNoteButton,icon:"edit"},"\uc0c8 \ub178\ud2b8 \uc791\uc131\ud558\uae30")))))),r.a.createElement(x.a,{display:"flex",flexDirection:"column",height:"100%"},r.a.createElement(x.a,{display:"flex",justifyContent:"space-between",marginX:Object(B.a)(2),marginTop:Object(B.a)(2)},r.a.createElement(J.a,{appearance:"minimal",icon:"menu",iconSize:18,onClick:function(){return e.setState({isShown:!0})}}),r.a.createElement(A.a,{content:r.a.createElement(N.a,null,r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Item,{icon:"delete",onSelect:function(){return e._handleNoteDelete({noteId:e.state.selected})}},"\ub178\ud2b8 \uc0ad\uc81c")))},r.a.createElement(J.a,{appearance:"minimal",icon:"more",iconSize:18}))),r.a.createElement(x.a,{paddingX:this.props.isMobile?15:0,width:this.props.isMobile?"100%":730,marginX:"auto",paddingTop:15},r.a.createElement(x.a,{marginBottom:20},r.a.createElement(D.a,{size:900},i?r.a.createElement(I.a,null,"title.."):r.a.createElement(T.a,{placeholder:"Title here..",value:n,onKeyDown:this._handleEditorKeyDown,onChange:function(t){var a=t.value;e._handleTitleChange({value:a})}}))),r.a.createElement(x.a,{flex:1,overflowY:"auto"},i?r.a.createElement(I.a,null,"content.."):r.a.createElement(T.a,{placeholder:"Content here..",value:o,style:{height:"100%"},onChange:function(t){var a=t.value;return e._handleContentChange({value:a})}}))))):r.a.createElement(x.a,{display:"flex",alignItems:"center",justifyContent:"center",height:400},r.a.createElement(k.a,null)))}}]),t}(n.Component),U=Object(O.a)(w()(function(e){var t=e.width;return{isMobile:t<730,width:t}}),c.e)(R),Y=a(366),F=a(149),P=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",errorMessage:""},a._handleSignin=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.auth().signInWithEmailAndPassword(a.state.email,a.state.password);case 3:a.props.history.push("/"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),a.setState({errorMessage:e.t0.message});case 10:case"end":return e.stop()}},e,null,[[0,6]])})),a._handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(d.a)({},n,r))},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(x.a,{background:"tint1",height:"100%",paddingTop:50},r.a.createElement(x.a,{background:"white",marginX:"auto",paddingY:30,paddingX:this.props.isMobile?15:50,elevation:3,width:this.props.isMobile?"calc(100% - 30px)":400,border:"default"},r.a.createElement(D.a,{size:600,marginBottom:20,textAlign:"center"},"\ub85c\uadf8\uc778"),r.a.createElement(Y.a,{name:"email",onChange:this._handleChange,placeholder:"\uc774\uba54\uc77c",marginBottom:10,width:"100%",value:this.state.email,required:!0}),r.a.createElement(Y.a,{name:"password",onChange:this._handleChange,placeholder:"\ube44\ubc00\ubc88\ud638",width:"100%",type:"password",value:this.state.password,required:!0}),r.a.createElement(x.a,{intent:"danger",padding:10},r.a.createElement(I.a,{color:"red"},this.state.errorMessage)),r.a.createElement(x.a,{display:"flex",justifyContent:"flex-end",marginTop:20},r.a.createElement(F.a,{marginRight:10,onClick:function(){return e.props.history.push("/signup")}},"\ud68c\uc6d0\uac00\uc785"),r.a.createElement(F.a,{appearance:"primary",intent:"none",onClick:this._handleSignin},"\ub85c\uadf8\uc778"))))}}]),t}(n.Component),H=Object(O.a)(w()(function(e){return{isMobile:e.width<730}}),c.e)(P),Q=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",username:"",errorMessage:""},a._handleSignup=Object(p.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.auth().createUserWithEmailAndPassword(a.state.email,a.state.password);case 3:return t=e.sent,n=t.user,e.next=7,n.updateProfile({displayName:a.state.username});case 7:return e.next=9,q.collection("users").doc(n.uid).set({uid:n.uid,email:n.email});case 9:a.props.history.push("/"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),a.setState({errorMessage:e.t0.message});case 16:case"end":return e.stop()}},e,null,[[0,12]])})),a._handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(d.a)({},n,r))},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(x.a,{background:"tint1",height:"100%",paddingTop:50},r.a.createElement(x.a,{background:"white",marginX:"auto",paddingY:30,paddingX:this.props.isMobile?15:50,elevation:3,width:this.props.isMobile?"calc(100% - 30px)":400,border:"default"},r.a.createElement(D.a,{size:600,marginBottom:20,textAlign:"center"},"\ud68c\uc6d0\uac00\uc785"),r.a.createElement(Y.a,{name:"email",onChange:this._handleChange,placeholder:"\uc774\uba54\uc77c",marginBottom:10,width:"100%",value:this.state.email,required:!0}),r.a.createElement(Y.a,{name:"password",onChange:this._handleChange,placeholder:"\ube44\ubc00\ubc88\ud638",width:"100%",type:"password",marginBottom:10,value:this.state.password,required:!0}),r.a.createElement(Y.a,{name:"username",onChange:this._handleChange,placeholder:"\uc774\ub984",marginBottom:10,width:"100%",value:this.state.username,required:!0}),r.a.createElement(x.a,{intent:"danger",padding:10},r.a.createElement(I.a,{color:"red"},this.state.errorMessage)),r.a.createElement(x.a,{display:"flex",justifyContent:"flex-end",marginTop:20},r.a.createElement(F.a,{marginRight:10,onClick:function(){return e.props.history.push("/signin")}},"\ub3cc\uc544\uac00\uae30"),r.a.createElement(F.a,{appearance:"primary",intent:"none",onClick:this._handleSignup},"\uac00\uc785\ud558\uae30"))))}}]),t}(n.Component),V=Object(O.a)(w()(function(e){return{isMobile:e.width<730}}),c.e)(Q);a(351);var Z=function(){return r.a.createElement(s.a,null,r.a.createElement(c.a,{exact:!0,path:"/",component:U}),r.a.createElement(c.a,{path:"/signup",component:V}),r.a.createElement(c.a,{path:"/signin",component:H}))};i.a.render(r.a.createElement(Z,null),document.getElementById("root"))}},[[158,1,2]]]);
//# sourceMappingURL=main.372489b2.chunk.js.map